<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è - –Ø–¥—Ä–æ –õ–∏—á–Ω–æ—Å—Ç–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
    <!-- Global error display -->
    <div id="global-error" class="error-display"></div>
    
    <div class="container">
        <!-- Start Screen -->
        <div id="start-screen">
            <div class="header">
                <span class="emoji-large">üîÆ</span>
                <h1>–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è –Ø–¥—Ä–∞ –õ–∏—á–Ω–æ—Å—Ç–∏</h1>
                <p>–£–∑–Ω–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —á–µ—Ä—Ç—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ —á–∏—Å–ª–∞</p>
            </div>
            <button id="start-button" class="button">–ù–∞—á–∞—Ç—å —Ä–∞—Å—á–µ—Ç</button>
        </div>

        <!-- Name Input Screen -->
        <div id="name-screen" class="hidden">
            <div class="header">
                <h2>–í–∞—à–µ –∏–º—è</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è, –∫–∞–∫ –≤ –ø–∞—Å–ø–æ—Ä—Ç–µ</p>
            </div>
            <input type="text" id="name-input" class="input" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
            <button id="name-submit" class="button">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
            <button id="name-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Birthdate Input Screen -->
        <div id="birthdate-screen" class="hidden">
            <div class="header">
                <h2>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì</p>
            </div>
            <input type="text" id="birthdate-input" class="input" placeholder="01.01.1990">
            <button id="birthdate-submit" class="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —è–¥—Ä–æ</button>
            <button id="birthdate-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden">
            <div class="result-header">
                <h2>–í–∞—à–µ –Ø–¥—Ä–æ –õ–∏—á–Ω–æ—Å—Ç–∏</h2>
                <div id="user-info" class="user-info"></div>
            </div>
            
            <div class="card">
                <div class="profile-item">
                    <span class="profile-label">–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å:</span>
                    <span id="life-path-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                    <span id="birthday-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–í—ã—Ä–∞–∂–µ–Ω–∏–µ:</span>
                    <span id="expression-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–î—É—à–∞:</span>
                    <span id="soul-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–õ–∏—á–Ω–æ—Å—Ç—å:</span>
                    <span id="personality-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–°—É–¥—å–±–∞:</span>
                    <span id="destiny-value" class="profile-value">‚Äî</span>
                </div>
            </div>

            <div class="feature-grid">
                <div id="interpretation-card" class="feature-card">
                    <div class="feature-icon">üß†</div>
                    <div>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</div>
                </div>
                <div id="extended-card" class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <div>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</div>
                </div>
                <div id="bridges-card" class="feature-card">
                    <div class="feature-icon">üåâ</div>
                    <div>–ú–æ—Å—Ç—ã</div>
                </div>
                <div id="cycles-card" class="feature-card">
                    <div class="feature-icon">üåÄ</div>
                    <div>–¶–∏–∫–ª—ã</div>
                </div>
                <div id="partner-card" class="feature-card">
                    <div class="feature-icon">üë•</div>
                    <div>–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìÖ</div>
                    <div>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
                </div>
            </div>

            <button id="restart-button" class="button button-secondary">–ù–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç</button>
        </div>

        <!-- Interpretation Screen -->
        <div id="interpretation-screen" class="hidden">
            <div class="header">
                <h2>–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –Ø–¥—Ä–∞</h2>
            </div>
            <div class="card">
                <div id="interpretation-content">
                    <!-- AI interpretation will be inserted here -->
                </div>
            </div>
            <button id="interpretation-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Extended Profile Screen -->
        <div id="extended-screen" class="hidden">
            <div class="header">
                <h2>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ü—Ä–æ—Ñ–∏–ª—å</h2>
            </div>
            <div class="card">
                <div class="profile-item">
                    <span class="profile-label">–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ:</span>
                    <span id="balance-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–†–æ—Å—Ç:</span>
                    <span id="growth-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:</span>
                    <span id="realization-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–†–∞–∑—É–º:</span>
                    <span id="mind-value" class="profile-value">‚Äî</span>
                </div>
            </div>
            <button id="extended-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Bridges Screen -->
        <div id="bridges-screen" class="hidden">
            <div class="header">
                <h2>–ú–æ—Å—Ç—ã –õ–∏—á–Ω–æ—Å—Ç–∏</h2>
            </div>
            <div class="card">
                <div class="profile-item">
                    <span class="profile-label">–í—ã—Ä–∞–∂–µ–Ω–∏–µ ‚Üî –î—É—à–∞:</span>
                    <span id="expression-soul-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–î—É—à–∞ ‚Üî –õ–∏—á–Ω–æ—Å—Ç—å:</span>
                    <span id="soul-personality-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–ü—É—Ç—å ‚Üî –î—É—à–∞:</span>
                    <span id="life-soul-value" class="profile-value">‚Äî</span>
                </div>
                <div class="profile-item">
                    <span class="profile-label">–ü—É—Ç—å ‚Üî –õ–∏—á–Ω–æ—Å—Ç—å:</span>
                    <span id="life-personality-value" class="profile-value">‚Äî</span>
                </div>
            </div>
            <button id="bridges-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Cycles Screen -->
        <div id="cycles-screen" class="hidden">
            <div class="header">
                <h2>–ñ–∏–∑–Ω–µ–Ω–Ω—ã–µ –¶–∏–∫–ª—ã</h2>
            </div>
            <div class="card">
                <div class="profile-item">
                    <span class="profile-label">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–¥:</span>
                    <span id="personal-year-value" class="profile-value">‚Äî</span>
                </div>
                <div id="pinnacles-container">
                    <!-- Pinnacles will be inserted here -->
                </div>
            </div>
            <button id="cycles-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Partner Screen -->
        <div id="partner-screen" class="hidden">
            <div class="header">
                <h2>–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞</p>
            </div>
            <input type="text" id="partner-name-input" class="input" placeholder="–ò–º—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞">
            <input type="text" id="partner-birthdate-input" class="input" placeholder="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞ (–î–î.–ú–ú.–ì–ì–ì–ì)">
            <button id="partner-submit" class="button">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</button>
            <button id="partner-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Compatibility Results Screen -->
        <div id="compatibility-screen" class="hidden">
            <div class="header">
                <h2>–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</h2>
            </div>
            <div class="compatibility-container">
                <div class="partner-column">
                    <div class="partner-header">–ü–∞—Ä—Ç–Ω–µ—Ä A</div>
                    <div class="profile-item">
                        <span class="profile-label">–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å:</span>
                        <span id="partner-a-life-path" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                        <span id="partner-a-birthday" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–í—ã—Ä–∞–∂–µ–Ω–∏–µ:</span>
                        <span id="partner-a-expression" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–î—É—à–∞:</span>
                        <span id="partner-a-soul" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–õ–∏—á–Ω–æ—Å—Ç—å:</span>
                        <span id="partner-a-personality" class="profile-value">‚Äî</span>
                    </div>
                </div>
                <div class="partner-column">
                    <div class="partner-header">–ü–∞—Ä—Ç–Ω–µ—Ä B</div>
                    <div class="profile-item">
                        <span class="profile-label">–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –ø—É—Ç—å:</span>
                        <span id="partner-b-life-path" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:</span>
                        <span id="partner-b-birthday" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–í—ã—Ä–∞–∂–µ–Ω–∏–µ:</span>
                        <span id="partner-b-expression" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–î—É—à–∞:</span>
                        <span id="partner-b-soul" class="profile-value">‚Äî</span>
                    </div>
                    <div class="profile-item">
                        <span class="profile-label">–õ–∏—á–Ω–æ—Å—Ç—å:</span>
                        <span id="partner-b-personality" class="profile-value">‚Äî</span>
                    </div>
                </div>
            </div>
            <button id="compatibility-back" class="button button-secondary">–ù–∞–∑–∞–¥</button>
        </div>

        <!-- Loading Indicator -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>–†–∞—Å—á–µ—Ç...</p>
        </div>
    </div>

    <!-- Debug information -->
    <div id="debug-info" class="debug-info">
        Debug Info: <span id="debug-text"></span>
    </div>

    <!-- Import and initialize the main application -->
    <script type="module">
        // Add global error handler
        window.addEventListener('error', function(e) {
            const errorDisplay = document.getElementById('global-error');
            errorDisplay.textContent = 'Error: ' + e.message;
            errorDisplay.style.display = 'block';
            console.error('Global error:', e.error);
        });
        
        // Add debug information
        document.getElementById('debug-info').classList.remove('hidden');
        document.getElementById('debug-text').textContent = 'Loading modules...';
        
        import { NumerologyApp } from './src/app.js';
        
        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            try {
                document.getElementById('debug-text').textContent = 'Initializing app...';
                window.numerologyApp = new NumerologyApp();
                document.getElementById('debug-text').textContent = 'App initialized successfully';
            } catch (error) {
                document.getElementById('debug-text').textContent = 'Error initializing app: ' + error.message;
                console.error('Error initializing app:', error);
            }
        });
    </script>
    
    <!-- Back button event handlers -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Set up back button handlers for each screen
            document.getElementById('interpretation-back').addEventListener('click', () => {
                if (window.numerologyApp) {
                    window.numerologyApp.navigation.goBack();
                }
            });
            
            document.getElementById('extended-back').addEventListener('click', () => {
                if (window.numerologyApp) {
                    window.numerologyApp.navigation.goBack();
                }
            });
            
            document.getElementById('bridges-back').addEventListener('click', () => {
                if (window.numerologyApp) {
                    window.numerologyApp.navigation.goBack();
                }
            });
            
            document.getElementById('cycles-back').addEventListener('click', () => {
                if (window.numerologyApp) {
                    window.numerologyApp.navigation.goBack();
                }
            });
            
            document.getElementById('compatibility-back').addEventListener('click', () => {
                if (window.numerologyApp) {
                    window.numerologyApp.navigation.goBack();
                }
            });
        });
    </script>
</body>
</html>